<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Массивы с числовыми индексами</title>
</head>
<body>
<pre>
Массивы существуют для работы с упорядоченным набором элементов.

Объявление:

// предпочтительное
var arr = [элемент1, элемент2...];

// new Array
var arr = new Array(элемент1, элемент2...);
При этом new Array(число) создаёт массив заданной длины, без элементов. Чтобы избежать ошибок, предпочтителен первый синтаксис.

Свойство length – длина массива. Если точнее, то последний индекс массива плюс 1. Если её уменьшить вручную, то массив укоротится. Если length больше реального количества элементов, то отсутствующие элементы равны undefined.

Массив можно использовать как очередь или стек.

Операции с концом массива:

arr.push(элемент1, элемент2...) добавляет элементы в конец.
var elem = arr.pop() удаляет и возвращает последний элемент.
Операции с началом массива:

arr.unshift(элемент1, элемент2...) добавляет элементы в начало.
var elem = arr.shift() удаляет и возвращает первый элемент.
Эти операции перенумеровывают все элементы, поэтому работают медленно.

В следующей главе мы рассмотрим другие методы для работы с массивами.
</pre>

<script>
    /*
    var goods = ["Яблоко", "Апельсин", "Слива", "Вишня", "Груша"];
    goods.push("Компьютер"); // или goods[goods.length] = 'Компьютер'; // Добавить новый элемент в массив
    alert(goods[goods.length-1]); // Получить последний элемент массива

    var styles = ["Джаз", "Блюз"]; //Создание массива
    alert(styles);
    styles.push("Рок-н-Ролл");
    alert(styles);
    styles[styles.length-2] = "Классика";
    alert(styles);
    alert(styles.shift());
    alert(styles);
    styles.unshift("Рэп", "Регги");
    alert(styles);

    // Получить случайное значение из массива
    var arr = ["Яблоко", "Апельсин", "Груша", "Лимон"];
    var min = 0; max = arr.length-1;
    var rand = Math.floor(Math.random() * arr.length); // Код для генерации случайного числа min + Math.floor(Math.random() * (max + 1 - min));
    alert(arr[rand]);


    // Создайте калькулятор для введенных значений
    var arrNum = [],
        NumTrue = true,
        sum = 0;

    function isNumeric(n) {
        return !isNaN(parseFloat(n)) && isFinite(n)
    }

    while (NumTrue  != null){
        var Num = prompt("Введите число", "");
        if (!isNumeric(Num) || Num == null) {
            alert("Не число");
            break;
        }
        sum += +Num;
        arrNum.push(+Num);
    }

    alert(arrNum);
    alert(sum);
    */
    /* // Альтернативный вариант Создайте калькулятор для введенных значений
    var numbers = [];

    while (true) {
        var value = prompt("Введите число", 0);
        if (value === "" || value === null || isNaN(value)) break;
        numbers.push(+value);
    }

    var sum = 0;
    for (var i = 0; i < numbers.length; i++) {
        sum += numbers[i];
    }

    alert( sum );
    */

    //Поиск в массиве
    /*function find(arr, value) {
        var pos = -1;
        for (var i = 0; i < arr.length; i++){
            if (arr[i] === value) {
                pos = i;
            }
        }
        return pos;
    }
    // Альтернативный вариант поиска в массиве
    function find(array, value) {
        if (array.indexOf) { // если метод существует
            return array.indexOf(value);
        }

        for (var i = 0; i < array.length; i++) {
            if (array[i] === value) return i;
        }

        return -1;
    }


    arr = ["test", 2, 1.5, false];

    alert(find(arr, "test")); // 0
    alert(find(arr, 2)); // 1
    alert(find(arr, 1.5)); // 2

    alert(find(arr, 0)); // -1


    // Фильтр диапазона
    function filterRange(arr, a, b) {
        var newArr = [];
        for (var i = 0; i < arr.length; i++) {
            if (arr[i] >= a && arr[i] <= b) {
                newArr.push(arr[i]);
            }
        }
        return newArr;
    }

    var arr = [5, 4, 3, 8, 0];

    var filtered = filterRange(arr, 3, 5);
    // теперь filtered = [5, 4, 3]
    // arr не изменился
    alert(filtered);


    // Решето Эратосфена
    var arr = [],
    maxNum = 100; //prompt("Введите максимальное число", "100"),
    p = 2,
    sum = 0;
    for (var i=1; i < maxNum; i++) { //Формируем массив
        arr[i] = i+1;
    }
    alert(arr);

    for (var b = 1; b < arr.length; b++, p++) {
        if (arr[b] !== false) {
            var n = 2;
            for (n; n < maxNum; n++) {
                for (var a = 1; a < arr.length; a++) {
                    if (p * n == arr[a]) {
                        arr[a] = false;
                    }
                }
            }
        }
    }
    for (var c = 1; c < arr.length; c++) {
        if (arr[c] !== false) {
           sum += arr[c];
        }
    }
    alert(sum);

    // Альтернативный вариант Эратосфена
    // шаг 1
    var arr = [];

    for (var i = 2; i < 100; i++) {
        arr[i] = true
    }

    // шаг 2
    var p = 2;

    do {
        // шаг 3
        for (i = 2 * p; i < 100; i += p) {
            arr[i] = false;
        }

        // шаг 4
        for (i = p + 1; i < 100; i++) {
            if (arr[i]) break;
        }

        p = i;
    } while (p * p < 100); // шаг 5

    // шаг 6 (готово)
    // посчитать сумму
    var sum = 0;
    for (i = 0; i < arr.length; i++) {
        if (arr[i]) {
            sum += i;
        }
    }

    alert( sum );

    var arr = [];

    function getMaxSubSum(arr) { // мое решение
        var sum = 0;
        for (var i = 0; i < arr.length; i++) {
            if (arr[i] > 0 || sum < arr[i]) {
                sum += arr[i];
            }
        }
        return sum;
    }
    arr = [2, -1, 2, 3, -9];
    alert(getMaxSubSum(arr));

    // альтернатива Медленное решение
    function getMaxSubSum(arr) {
        var maxSum = 0; // если совсем не брать элементов, то сумма 0

        for (var i = 0; i < arr.length; i++) {
            var sumFixedStart = 0;
            for (var j = i; j < arr.length; j++) {
                sumFixedStart += arr[j];
                maxSum = Math.max(maxSum, sumFixedStart);
            }
        }

        return maxSum;
    }
    */
    // альтернатива Быстрое решение

    function getMaxSubSum(arr) {
        var maxSum = 0,
            partialSum = 0;
        for (var i = 0; i < arr.length; i++) {
            partialSum += arr[i];
            maxSum = Math.max(maxSum, partialSum);
            if (partialSum < 0) partialSum = 0;
        }
        return maxSum;
    }

    alert( getMaxSubSum([-1, 2, 3, -9]) ); // 5
    alert( getMaxSubSum([-1, 2, 3, -9, 11]) ); // 11
    alert( getMaxSubSum([-2, -1, 1, 2]) ); // 3
    alert( getMaxSubSum([1, 2, 3]) ); // 6
    alert( getMaxSubSum([100, -9, 2, -3, 5]) ); // 100

</script>
</body>
</html>